<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-G4ETCF6QL5"
    ></script>
    <!-- Bootstrap -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
      integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css"
      integrity="sha512-NhSC1YmyruXifcj/KFRWoC561YpHpc5Jtzgvbuzx5VozKpWvQ+4nXhPdFgmx8xqexRcpAglTj9sIBWINXa8x5w=="
      crossorigin="anonymous"
    />
    <script
      src="https://kit.fontawesome.com/432fa54d25.js"
      crossorigin="anonymous"
    ></script>
    <link rel="stylesheet" href="./assets/css/style.css" />
    <link rel="stylesheet" href="./assets/css/shepherd.css" />

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <style></style>

    <title>ODF4 Sizer</title>
    <!-- <script type="text/javascript" src="http://livejs.com/live.js"></script> -->
  </head>

  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>

    <div id="notification" class="hidden">
      <span class="notification__text"
        >A newer version of this application is available.</span
      >
      <button class="notification__refresh">REFRESH</button>
    </div>

    <div class="header">
      <div class="logo"></div>
      <div class="text">
        <h2>
          <span class="light">ODF</span>
          Sizing Tool
        </h2>
      </div>
      <div class="faq-link">
        <a href="./faq.html" target="_blank"
          ><i class="fas fa-external-link-alt"></i> FAQ</a
        >
      </div>
    </div>
    <div class="container mw-100">
      <div class="row justify-content-md-center sticky-top">
        <div class="container">
          <div
            id="supportExceptionWarning"
            class="my-2 p-3 bg-danger medium text-white font-weight-bold text-center medium d-none row"
          >
            <div class="container">
              <div class="row">
                <div class="col-">
                  This cluster is not within the regular support limits. You
                  will need a support exception!&nbsp;<br />
                </div>
                <div class="col-">
                  Check the
                  <a
                    style="background-color: white"
                    href="https://access.redhat.com/articles/4731161"
                    >support matrix</a
                  >
                  or&nbsp;
                </div>
                <div class="col-" id="supportExceptionLink">
                  open a support exception ticket
                </div>
              </div>
              <div id="supportExceptionAccordion" class="pt-3 row"></div>
            </div>
          </div>
          <div
            id="compactSizeWarning"
            class="my-2 p-3 bg-danger medium text-white font-weight-bold medium d-none row"
          >
            You requested a compact cluster, but the capacity is not reachable
            with the set disk size and node resources.<br />
            Either reduce the required capacity or increase the disk size or
            node resources.
          </div>
        </div>
      </div>
      <div class="row justify-content-md-center">
        <div class="my-2 p-3 bg-dark text-white medium w-100">
          The purpose of the ODF Sizing Tool is to help architects design ODF
          configurations for OCP clusters. Inputs include desired cluster
          capacity and node building block parameters. Outputs include guidance
          on how to design your ODF layout to achieve the desired cluster
          capacity. Relevant Red Hat SKU information is also provided to assist
          with cost estimation.
        </div>
      </div>
      <div class="row">
        <div class="col-md-4">
          <div class="content-body">
            <div id="platformGroup" class="form-group">
              <p class="medium">Platform</p>
              <select id="platform" class="custom-select">
                <option value="metal">Bare Metal</option>
                <option value="awsAttached">
                  AWS i3en.2xl using local NVMe
                </option>
                <option value="awsEBS">AWS m5 nodes using EBS</option>
                <option value="gcp">GCP with e2-standard-16 instances</option>
                <option value="azure">Azure with D16s_v3 instances</option>
                <option value="vm">VMs in VMware</option>
                <option value="vmPreview">VMs in RHV & OpenStack</option>
              </select>
            </div>

            <div class="form-group manualNode d-none">
              <p class="medium">Node CPU unit count</p>
              <select id="nodeCPU" class="custom-select">
                <!-- Make sure to use values that are divisible by 4 -->
                <!-- else the SKU calculation can be screwed up -->
                <option value="8">8</option>
                <option value="16">16</option>
                <option value="32" selected="selected">32</option>
                <option value="48">48</option>
              </select>
            </div>

            <div class="form-group manualNode d-none">
              <p class="medium">Node memory in GB</p>
              <select id="nodeMemory" class="custom-select">
                <option value="8">8</option>
                <option value="16">16</option>
                <option value="32">32</option>
                <option value="64" selected="selected">64</option>
                <option value="96">96</option>
                <option value="128">128</option>
              </select>
            </div>

            <div id="diskSizeGroup" class="form-group">
              <label for="diskSizeRange" class="medium"
                >Flash Disk Size (TB)</label
              >
              <div class="input-group mb-3">
                <input
                  type="range"
                  class="form-control-range range-controller"
                  min="0.5"
                  max="16"
                  step="0.1"
                  value="4"
                  id="diskSizeRange"
                />
                <div class="input-group-append">
                  <span id="diskSizeRangeValue" class="input-group-text"></span>
                </div>
              </div>
            </div>

            <!-- <div class="form-group">
                        <label for="diskSpeedValue" class="medium">Disk Write IOPs</label>
                        <input type="text" id="diskSpeedValue" class="form-control " placeholder="Auto-calculated"
                            disabled />
                    </div> -->

            <div id="clusterSizeGroup" class="form-group">
              <label for="capacityRange" class="medium"
                >Usable capacity required (TB)</label
              >
              <div class="input-group mb-3">
                <input
                  type="range"
                  class="form-control-range"
                  min="2"
                  max="1000"
                  step="1"
                  value="10"
                  id="capacityRange"
                />
                <div class="input-group-append">
                  <span id="capacityRangeValue" class="input-group-text"></span>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-xl">
          <h3 class="header--border p-2">Result</h3>
          <div id="resultScreen" class="result-text my-1"></div>
          <div class="button-bar">
            <button
              id="advancedResultsButton"
              class="btn btn-primary"
              type="button"
              data-toggle="collapse"
              data-target="#advancedResultOutput"
              aria-expanded="false"
              aria-controls="advancedResultOutput"
              style="margin-top: 20px"
            >
              Show advanced output
            </button>
            <button
              id="SKUResultsButton"
              class="btn btn-primary d-none"
              type="button"
              data-toggle="collapse"
              data-target="#SKUOutput"
              aria-expanded="false"
              aria-controls="SKUOutput"
              style="margin-top: 20px"
            >
              Show SKU information
            </button>
            <button
              id="TuningButton"
              class="btn btn-primary d-none"
              type="button"
              data-toggle="collapse"
              data-target="#TuningOutput"
              aria-expanded="false"
              aria-controls="TuningOutput"
              style="margin-top: 20px"
            >
              Deployment tuning
            </button>
            <a
              id="canvasDownloadBtn"
              class="btn btn-primary"
              type="button"
              style="margin-top: 20px"
              >Download as PNG</a
            >
          </div>
          <div class="collapse" id="advancedResultOutput">
            <div id="advancedResultScreen" class="card card-body"></div>
          </div>
          <div class="collapse" id="SKUOutput">
            <div id="SKUScreen" class="card card-body"></div>
          </div>
          <div class="collapse" id="TuningOutput">
            <div id="TuningScreen" class="card card-body">
              <button
                id="TuningHelpButton"
                class="btn btn-secondary my-3"
                type="button"
                data-toggle="collapse"
                data-target="#TuningHelp"
                aria-expanded="false"
                aria-controls="TuningHelp"
                style="margin-top: 20px"
              >
                Help me decide
              </button>
              <div class="collapse pb-3" id="TuningHelp">
                <ul class="list-group list-group-flush">
                  <li class="list-group-item">
                    <p class="font-weight-bold">Standard</p>
                    is the regular way to deploy ODF
                  </li>
                  <li class="list-group-item">
                    <p class="font-weight-bold">Compact mode</p>
                    Will deploy ODF on the supervisors. Useful if there are no
                    OpenShift workers in the cluster
                  </li>
                  <li class="list-group-item">
                    <p class="font-weight-bold">Minimal mode</p>
                    Will decrease the ODF requirements to a minimum for small
                    deployments
                  </li>
                  <li class="list-group-item">
                    <p class="font-weight-bold">Service Disable mode</p>
                    Will allow disabling of ODF features to reduce CPU/RAM
                    resource consumption. <br /><mark>NOTE:</mark> This is an
                    undocumented feature in ODF 4.6 that requires support
                    exception approval. It will be documented and supported
                    without support exception in a later ODF release.
                  </li>
                  <li class="list-group-item">
                    <p class="font-weight-bold">External mode</p>
                    Will leverage an external ODF cluster for OpenShift storage.
                    This external ODF cluster is actually a Red Hat Ceph cluster
                    running on bare metal servers.
                    <a
                      href="https://access.redhat.com/documentation/en-us/red_hat_openshift_container_storage/4.6/html/planning_your_deployment/ocs-architecture_rhocs#external_approach"
                      >more details</a
                    >
                  </li>
                </ul>
                Note that compact and minimal mode will decrease the possible
                maximum capacity!
              </div>

              <div class="btn-group btn-group-toggle" data-toggle="buttons">
                <label class="btn btn-info active">
                  <input
                    type="radio"
                    name="deploymentType"
                    class="notServiceDisable"
                    value="standard"
                    id="standardMode"
                    autocomplete="off"
                  />
                  Standard
                </label>
                <label class="btn btn-info">
                  <input
                    type="radio"
                    name="deploymentType"
                    class="notServiceDisable"
                    value="compact"
                    id="compactMode"
                    autocomplete="off"
                  />
                  Compact
                </label>
                <label class="btn btn-info">
                  <input
                    type="radio"
                    name="deploymentType"
                    class="notServiceDisable"
                    value="minimal"
                    id="minimalMode"
                    autocomplete="off"
                  />
                  Minimal
                </label>
                <label class="btn btn-info">
                  <input
                    type="radio"
                    name="deploymentType"
                    class="serviceDisable"
                    value="serviceDisable"
                    id="serviceDisableMode"
                    autocomplete="off"
                  />
                  Service Disable
                </label>
                <label class="btn btn-info">
                  <input
                    type="radio"
                    name="deploymentType"
                    class="notServiceDisable"
                    value="external"
                    id="externalMode"
                    autocomplete="off"
                  />
                  External
                </label>
              </div>
              <div class="collapse" id="TuningServiceDisable">
                <ul class="list-group list-group-flush">
                  <li class="list-group-item">
                    <input
                      class="form-check-input serviceDisableCheckBox"
                      type="checkbox"
                      checked
                      id="cephFSActive"
                    />
                    <label class="form-check-label" for="cephFSActive"
                      >Shared File System</label
                    >
                  </li>
                  <li class="list-group-item">
                    <input
                      class="form-check-input serviceDisableCheckBox"
                      type="checkbox"
                      checked
                      id="nooBaaActive"
                    />
                    <label class="form-check-label" for="nooBaaActive"
                      >Multi Cloud Gateway Object Services</label
                    >
                  </li>
                  <li class="list-group-item">
                    <input
                      class="form-check-input serviceDisableCheckBox"
                      type="checkbox"
                      checked
                      id="rgwActive"
                    />
                    <label class="form-check-label" for="rgwActive"
                      >RADOS Gateway Object Services</label
                    >
                  </li>
                </ul>
              </div>
              <hr class="my-3" />

              <div class="form-check mx-auto">
                <input
                  class="form-check-input"
                  type="checkbox"
                  value=""
                  id="nvmeTuning"
                />
                <label class="form-check-label" for="nvmeTuning">
                  Tune for NVMe OSDs
                </label>
              </div>
            </div>
          </div>
          <div id="canvas-container"></div>
        </div>
      </div>
    </div>

    <script
      src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
      integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
      crossorigin="anonymous"
    ></script>

    <script>
      let secureRoot = "https://storage.cloud.google.com/sizer.ocs.ninja";
      if (
        ![
          "sizer.odf.ninja",
          "sizer.ocs.ninja",
          "storage.googleapis.com",
        ].includes(window.location.host)
      ) {
        secureRoot = ".";
      } else {
        window.dataLayer = window.dataLayer || [];
        function gtag() {
          dataLayer.push(arguments);
        }
        gtag("js", new Date());

        gtag("config", "G-G4ETCF6QL5");
      }
      const redHatModifications = document.createElement("script");
      redHatModifications.setAttribute("src", `${secureRoot}/assets/redhat.js`);
      const mainBundle = document.createElement("script");
      mainBundle.setAttribute("src", `./main-bundle.js`);
      document.head.appendChild(redHatModifications);
      document.head.appendChild(mainBundle);
    </script>
  </body>
</html>
